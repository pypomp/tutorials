---
title: >
  Lesson 0: Preparing Your Computer for the Course
author:
  - Aaron A. King
  - Edward L. Ionides
  - Kunyang He

format:
  beamer:
    code-block-font-size: \tiny                    
    fontsize: 11pt
    cite-method: natbib
    biblio-style: apalike
    toc: false  
    slide-level: 2
    header-includes: |
      \setbeamertemplate{footline}[page number]
    output-file: slides.pdf
  pdf:
    documentclass: article          
    fontsize: 11pt
    cite-method: natbib           
    biblio-style: apalike
    toc: false
    geometry: margin=1in
    output-file: notes.pdf
    
jupyter: python3 

---

## Introduction

- This course uses state-of-the-art tools and some care may be needed to set up the computational environment.

- We use `pypomp`, a Python implementation of partially observed Markov process (POMP) models.

- `pypomp` relies on `jax` for vectorization, just-in-time compilation, GPU accessibility, and automatic differentiation.

- `jax` is a high-performance compting package for Python. It depends on

  - CUDA, the NVIDIA GPU programming platform

  - XLA, an accelerated linear algebra library for CUDA

- Additionally, the course emphasizes reproducible data analysis using Quarto

## What you will need

To get started:

- Python 3.10 or higher.

- Basic familiarity with Python programming

- A text editor or IDE (e.g., VS Code, PyCharm, Jupyter, Positron). The notes are in Quarto (qmd) format. VS Code (with the Quarto extension) and Positron are recommended for working with qmd files.

- If you run Windows, the WSL2 Linux virtual machine is recommended for `jax`.

## Python Installation

First, check if you have Python installed and verify the version:

```bash
python --version
```

or

```bash
python3 --version
```

You should have Python 3.10 or higher. If not, make a fresh installation. Various Python distributions exist, but we recommend using the official Python distribution:

1. Download Python from [https://www.python.org/downloads/](https://www.python.org/downloads/)
2. Follow the installation instructions for your operating system
3. Make sure to check "Add Python to PATH" during installation (Windows)

## Setting Up a Virtual Environment

It is highly recommended to use a virtual environment to avoid conflicts with other Python projects. We use the built-in `venv` 

```bash
# Create a virtual environment in the
# working directory for your project
python -m venv .venv

# Activate the environment
source .venv/bin/activate
```


## Installing Required Packages

The main package we will use is `pypomp`. Install it using `pip`:

```bash
pip install pypomp
```

This will also install various dependencies, including `jax`, `numpy`, `pandas`, `scipy`, `matplotlib`.

The following additional packages are commonly used in the course:

```bash
pip install jupyter
```


## Optional: GPU acceleration with JAX

For faster computation, especially for large models, you can install JAX for GPU/TPU acceleration:

```bash
# For CPU-only (default)
pip install jax jaxlib

# For GPU support (CUDA)
# See https://github.com/google/jax#installation for detailed instructions
pip install jax[cuda12]
```

## Optional: Additional plotting libraries

For enhanced visualizations:

```bash
pip install seaborn plotly
```

## Setting Up Jupyter

Jupyter provides an alternative to Quarto for running Python code.

## Installing Jupyter

If you haven't already installed Jupyter:

```bash
pip install jupyter notebook jupyterlab
```

## Launching Jupyter

To start Jupyter Notebook:

```bash
jupyter notebook
```

To start JupyterLab (more modern interface):

```bash
jupyter lab
```

## Registering your virtual environment as a Jupyter kernel

If you created a virtual environment, register it with Jupyter:

```bash
# Make sure your virtual environment is activated
pip install ipykernel
python -m ipykernel install --user --name=sbied-env --display-name="SBIED Course"
```

## Verifying Your Installation

### Test basic Python functionality

Create a test Python script or run in a Python interpreter:

```python
import sys
print(f"Python version: {sys.version}")

import numpy as np
import scipy
import matplotlib.pyplot as plt
import pandas as pd

print("All basic packages imported successfully!")
```

### Test pypomp installation

Create a simple test to verify pypomp is working:

```python
import pypomp

print(f"pypomp version: {pypomp.__version__}")
print("pypomp installed successfully!")
```

## Test with a minimal example

Run this minimal POMP model to ensure everything is working:

```{python}
#| echo: true
#| eval: true
import numpy as np
import pypomp as pp

# Create a simple random walk model
def step_fn(x, t, params, **kwargs):
    return {'X': x['X'] + np.random.normal(0, params['sigma'])}

def rinit_fn(params, **kwargs):
    return {'X': 0.0}

def rmeas_fn(x, t, params, **kwargs):
    return {'Y': x['X'] + np.random.normal(0, params['tau'])}

def dmeas_fn(y, x, t, params, log=True, **kwargs):
    ll = -0.5 * np.log(2 * np.pi * params['tau']**2) - \
         0.5 * (y['Y'] - x['X'])**2 / params['tau']**2
    return ll if log else np.exp(ll)

# Create POMP object
params = {'sigma': 1.0, 'tau': 0.1}
times = np.arange(0, 100)

# If this runs without error, your installation is working!
print("Test completed successfully!")
```

# Downloading Course Materials

## Using Git (recommended)

If you have Git installed:

```bash
git clone https://github.com/[repository-url]/sbied-pypomp.git
cd sbied-pypomp
```

## Direct download

Alternatively, download the course materials as a ZIP file from the course website and extract them to your working directory.

## Troubleshooting: Common issues and solutions

### "pip: command not found"

- Make sure Python is installed and added to your PATH
- Try using `python -m pip` instead of `pip`

### "Permission denied" errors

- On macOS/Linux, try using `pip install --user package_name`
- Or use a virtual environment (recommended)

### Import errors

- Make sure your virtual environment is activated
- Verify package installation: `pip list | grep package_name`
- Try reinstalling: `pip uninstall package_name && pip install package_name`

### Jupyter kernel issues

- Make sure ipykernel is installed in your environment
- Re-register the kernel (see "Registering your virtual environment" above)
- Restart Jupyter after adding a new kernel

## Getting help

If you encounter issues:

1. Check the pypomp documentation: [https://github.com/pypomp/pypomp](https://github.com/pypomp/pypomp)
2. Search for error messages online
3. Ask for help during the course sessions
4. Check the course discussion forum

## Summary

By now, you should have:

- ✓ Python 3.8+ installed
- ✓ A virtual environment created and activated
- ✓ pypomp and required packages installed
- ✓ Quarto and/or Jupyter set up 
- ✓ Verified your installation with test code

You are now ready to begin the course!

# Additional Resources

- **Python Tutorial**: [https://docs.python.org/3/tutorial/](https://docs.python.org/3/tutorial/)
- **NumPy Documentation**: [https://numpy.org/doc/](https://numpy.org/doc/)
- **Matplotlib Tutorial**: [https://matplotlib.org/stable/tutorials/index.html](https://matplotlib.org/stable/tutorials/index.html)
- **Jupyter Documentation**: [https://jupyter.org/documentation](https://jupyter.org/documentation)
- **pypomp Repository**: [https://github.com/pypomp/pypomp](https://github.com/pypomp/pypomp)
- **JAX Documentation**: [https://docs.jax.dev](https://docs.jax.dev)